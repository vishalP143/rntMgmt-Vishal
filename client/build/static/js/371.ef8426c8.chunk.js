"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[371],{9371:(e,a,n)=>{n.r(a),n.d(a,{default:()=>A});var t=n(9379),l=n(5043),i=n(3216),r=n(9722),o=n(7391),s=n(4496),d=n(1596),m=n(8903),u=n(5795),h=n(2143),c=n(4605),x=n(3217),b=n(1906),v=n(579);const A=()=>{const e=(0,i.Zp)(),{id:a}=(0,i.g)(),[n,A]=(0,l.useState)({room_number:"",floor_number:"",building_name:"",room_type:"Single",rent:"",availability:!0,tenant_name:"",tenant_email:"",tenant_phone:"",lease_start_date:"",lease_end_date:""}),[g,p]=(0,l.useState)(!1),[y,_]=(0,l.useState)("");(0,l.useEffect)((()=>{p(!0),r.A.get("https://rntmgmt-vishal.onrender.com/api/rooms/".concat(a)).then((e=>{A(e.data),p(!1)})).catch((e=>{_("Failed to fetch room details. Please try again."),p(!1),console.error("Error fetching room details:",e)}))}),[a]);const j=e=>{const{name:a,value:l,type:i,checked:r}=e.target;A((0,t.A)((0,t.A)({},n),{},{[a]:"checkbox"===i?r:l}))};return(0,v.jsxs)(o.A,{maxWidth:"sm",sx:{my:5},children:[(0,v.jsx)(s.A,{variant:"h4",align:"center",gutterBottom:!0,children:"Update Room"}),(0,v.jsxs)(d.A,{sx:{padding:3},children:[(0,v.jsx)("form",{onSubmit:t=>(t.preventDefault(),p(!0),_(""),n.rent<=0?(_("Rent must be a positive number."),void p(!1)):n.lease_start_date&&n.lease_end_date&&new Date(n.lease_start_date)>new Date(n.lease_end_date)?(_("Lease start date cannot be later than the lease end date."),void p(!1)):void r.A.put("https://rntmgmt-vishal.onrender.com/api/rooms/".concat(a),n).then((()=>{alert("Room updated successfully!"),e("/rooms/".concat(a))})).catch((e=>{var a;const n=(null===(a=e.response)||void 0===a?void 0:a.data)||"Failed to update room. Please try again.";_(n)})).finally((()=>p(!1)))),children:(0,v.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Room Number *",variant:"outlined",fullWidth:!0,margin:"normal",name:"room_number",value:n.room_number,onChange:j,required:!0,"aria-label":"Room Number"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Floor Number *",variant:"outlined",fullWidth:!0,margin:"normal",name:"floor_number",type:"number",value:n.floor_number,onChange:j,required:!0,"aria-label":"Floor Number"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Building Name *",variant:"outlined",fullWidth:!0,margin:"normal",name:"building_name",value:n.building_name,onChange:j,required:!0,"aria-label":"Building Name"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsxs)(u.A,{select:!0,label:"Room Type *",variant:"outlined",fullWidth:!0,margin:"normal",name:"room_type",value:n.room_type,onChange:j,required:!0,"aria-label":"Room Type",children:[(0,v.jsx)(h.A,{value:"Single",children:"Single"}),(0,v.jsx)(h.A,{value:"Double",children:"Double"}),(0,v.jsx)(h.A,{value:"Shared",children:"Shared"})]})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Rent (\u20b9 per month) *",variant:"outlined",fullWidth:!0,margin:"normal",name:"rent",type:"number",value:n.rent,onChange:j,required:!0,"aria-label":"Rent"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(c.A,{control:(0,v.jsx)(x.A,{name:"availability",checked:n.availability,onChange:j,"aria-label":"Availability"}),label:"Available"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Tenant Details (Optional)"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Tenant Name",variant:"outlined",fullWidth:!0,margin:"normal",name:"tenant_name",value:n.tenant_name,onChange:j,"aria-label":"Tenant Name"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Tenant Email",variant:"outlined",fullWidth:!0,margin:"normal",name:"tenant_email",type:"email",value:n.tenant_email,onChange:j,"aria-label":"Tenant Email"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Tenant Phone",variant:"outlined",fullWidth:!0,margin:"normal",name:"tenant_phone",type:"tel",value:n.tenant_phone,onChange:j,"aria-label":"Tenant Phone"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Lease Dates"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Lease Start Date",variant:"outlined",fullWidth:!0,margin:"normal",name:"lease_start_date",type:"date",value:n.lease_start_date,onChange:j,InputLabelProps:{shrink:!0},"aria-label":"Lease Start Date"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(u.A,{label:"Lease End Date",variant:"outlined",fullWidth:!0,margin:"normal",name:"lease_end_date",type:"date",value:n.lease_end_date,onChange:j,InputLabelProps:{shrink:!0},"aria-label":"Lease End Date"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(b.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:g,children:g?"Updating...":"Update Room"})}),(0,v.jsx)(m.Ay,{item:!0,xs:12,children:(0,v.jsx)(b.A,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{mt:2},onClick:()=>e("/rooms"),"aria-label":"Cancel",children:"Cancel"})})]})}),y&&(0,v.jsx)(s.A,{color:"error",variant:"body2",sx:{mt:2},children:y})]})]})}}}]);
//# sourceMappingURL=371.ef8426c8.chunk.js.map