"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[349],{4788:(e,r,t)=>{t.d(r,{A:()=>m});t(5043);var o=t(2110),a=t(6591),l=t(6494),s=t(4496),n=t(7353),i=t(1906),c=t(5475),d=t(579);const m=e=>{let{room:r}=e;return(0,d.jsxs)(o.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s, box-shadow 0.3s",borderRadius:3,boxShadow:4,"&:hover":{transform:"translateY(-8px)",boxShadow:8}},role:"article","aria-labelledby":"room-card-".concat(r._id),children:[(0,d.jsx)(a.A,{component:"img",height:"200",image:"https://roohtravel.com/wp-content/uploads/2023/07/thailand_hotels_with_pool.jpeg",alt:"Room",loading:"lazy",sx:{objectFit:"cover"}}),(0,d.jsxs)(l.A,{sx:{flexGrow:1,p:2},children:[(0,d.jsx)(s.A,{variant:"h6",component:"div",color:"primary",gutterBottom:!0,sx:{fontWeight:600},id:"room-card-".concat(r._id),children:(0,d.jsxs)(c.N_,{to:"/room-details/".concat(r._id),style:{textDecoration:"none",color:"inherit"},"aria-label":"Go to Room ".concat(r.room_number," details"),children:["Room ",r.room_number," - ",r.room_type]})}),(0,d.jsxs)(s.A,{variant:"subtitle1",color:"text.secondary",children:["Floor: ",r.floor_number]}),(0,d.jsxs)(s.A,{variant:"subtitle2",color:"text.secondary",sx:{mt:1},children:["Rent: ",(0,d.jsxs)("strong",{children:["$",r.rent]})," / month"]}),(0,d.jsx)(s.A,{variant:"subtitle2",color:r.availability?"success.main":"error.main",sx:{mt:1},"aria-label":"Room ".concat(r.room_number," is ").concat(r.availability?"Available":"Occupied"),children:r.availability?"Available":"Occupied"}),r.tenant_name&&(0,d.jsxs)(s.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Tenant: ",r.tenant_name]})]}),(0,d.jsx)(n.A,{sx:{p:2,mt:"auto"},children:(0,d.jsx)(i.A,{component:c.N_,to:"/rooms/".concat(r._id),variant:"contained",color:"primary",size:"medium",fullWidth:!0,sx:{fontWeight:"bold",textTransform:"none"},"aria-label":"View details for Room ".concat(r.room_number),children:"View Details"})})]})}},7349:(e,r,t)=>{t.r(r),t.d(r,{default:()=>B});var o=t(9379),a=t(5043),l=t(7353),s=t(1637),n=t(7391),i=t(4496),c=t(2110),d=t(6494),m=t(8903),h=t(5795),x=t(3193),u=t(9190),A=t(9285),y=t(2143),j=t(1906),v=t(9484),b=t(5550),p=t(4788),g=t(9722),f=t(3536),_=t(579);const B=()=>{const[e,r]=(0,a.useState)([]),[t,B]=(0,a.useState)([]),[S,T]=(0,a.useState)(!0),[w,C]=(0,a.useState)([]),[R,O]=(0,a.useState)({searchTerm:"",searchField:"room_type",sortBy:"room_number",sortOrder:"asc",roomType:"all"});(0,a.useEffect)((()=>{g.A.get("https://rntmgmt-vishal.onrender.com/api/rooms").then((e=>{r(e.data),B(e.data);const t=[...new Set(e.data.map((e=>e.room_type)))];C(t),T(!1)})).catch((e=>{console.error("Error fetching rooms:",e),T(!1)}))}),[]);const F=(0,a.useMemo)((()=>r=>{let t=[...e];r.searchTerm&&(t=t.filter((e=>{var t;const o=null===(t=e[r.searchField])||void 0===t?void 0:t.toString().toLowerCase();return null===o||void 0===o?void 0:o.includes(r.searchTerm.toLowerCase())}))),"all"!==r.roomType&&(t=t.filter((e=>e.room_type===r.roomType))),t.sort(((e,t)=>{var o,a;let l=null===(o=e[r.sortBy])||void 0===o?void 0:o.toString().toLowerCase(),s=null===(a=t[r.sortBy])||void 0===a?void 0:a.toString().toLowerCase();return"lease_start"!==r.sortBy&&"lease_end"!==r.sortBy||(l=new Date(e[r.sortBy]),s=new Date(t[r.sortBy])),l<s?"asc"===r.sortOrder?-1:1:l>s?"asc"===r.sortOrder?1:-1:0})),B(t)}),[e]),W=(0,a.useCallback)((0,f.debounce)((e=>O((r=>(0,o.A)((0,o.A)({},r),{},{searchTerm:e})))),500),[]);return(0,a.useEffect)((()=>{F(R)}),[R,F]),S?(0,_.jsx)(l.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,_.jsx)(s.A,{})}):(0,_.jsxs)(n.A,{maxWidth:"lg",sx:{py:4},children:[(0,_.jsx)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",color:"primary",children:"Search Rooms"}),(0,_.jsx)(c.A,{sx:{mb:4,p:2},children:(0,_.jsx)(d.A,{children:(0,_.jsxs)(m.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,_.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(h.A,{fullWidth:!0,label:"Search",value:R.searchTerm,onChange:e=>W(e.target.value),InputProps:{startAdornment:(0,_.jsx)(v.default,{sx:{mr:1,color:"text.secondary"}})},"aria-label":"search rooms"})}),(0,_.jsx)(m.Ay,{item:!0,sx:12,md:2,children:(0,_.jsxs)(x.A,{fullWidth:!0,children:[(0,_.jsx)(u.A,{children:"Search By"}),(0,_.jsxs)(A.A,{value:R.searchField,label:"Search By",onChange:e=>O((0,o.A)((0,o.A)({},R),{},{searchField:e.target.value})),"aria-label":"search by",children:[(0,_.jsx)(y.A,{value:"room_type",children:"Room Type"}),(0,_.jsx)(y.A,{value:"building_name",children:"Building Name"}),(0,_.jsx)(y.A,{value:"availability",children:"Availability"}),(0,_.jsx)(y.A,{value:"rent",children:"Rent"})]})]})}),(0,_.jsx)(m.Ay,{item:!0,xs:12,md:2,children:(0,_.jsxs)(x.A,{fullWidth:!0,children:[(0,_.jsx)(u.A,{children:"Sort By"}),(0,_.jsxs)(A.A,{value:R.sortBy,label:"Sort By",onChange:e=>O((0,o.A)((0,o.A)({},R),{},{sortBy:e.target.value})),"aria-label":"sort by",children:[(0,_.jsx)(y.A,{value:"room_number",children:"Room Number"}),(0,_.jsx)(y.A,{value:"building_name",children:"Building Name"}),(0,_.jsx)(y.A,{value:"rent",children:"Rent"}),(0,_.jsx)(y.A,{value:"lease_start",children:"Lease Start Date"})]})]})}),(0,_.jsx)(m.Ay,{item:!0,xs:12,md:2,children:(0,_.jsxs)(x.A,{fullWidth:!0,children:[(0,_.jsx)(u.A,{children:"Order"}),(0,_.jsxs)(A.A,{value:R.sortOrder,label:"Order",onChange:e=>O((0,o.A)((0,o.A)({},R),{},{sortOrder:e.target.value})),"aria-label":"order",children:[(0,_.jsx)(y.A,{value:"asc",children:"Ascending"}),(0,_.jsx)(y.A,{value:"desc",children:"Descending"})]})]})}),(0,_.jsx)(m.Ay,{item:!0,xs:12,md:2,children:(0,_.jsxs)(x.A,{fullWidth:!0,children:[(0,_.jsx)(u.A,{children:"Room Type"}),(0,_.jsxs)(A.A,{value:R.roomType,label:"Room Type",onChange:e=>O((0,o.A)((0,o.A)({},R),{},{roomType:e.target.value})),"aria-label":"room type",children:[(0,_.jsx)(y.A,{value:"all",children:"All Types"}),w.map(((e,r)=>(0,_.jsx)(y.A,{value:e,children:e},r)))]})]})}),(0,_.jsx)(m.Ay,{item:!0,xs:12,children:(0,_.jsx)(l.A,{display:"flex",justifyContent:"center",children:(0,_.jsx)(j.A,{variant:"outlined",startIcon:(0,_.jsx)(b.A,{}),onClick:()=>{O({searchTerm:"",searchField:"room_type",sortBy:"room_number",sortOrder:"asc",roomType:"all"})},children:"Reset Filters"})})})]})})}),(0,_.jsx)(l.A,{sx:{mb:2},children:(0,_.jsxs)(i.A,{variant:"body1",color:"text.secondary",children:["Found ",t.length," rooms"]})}),(0,_.jsx)(m.Ay,{container:!0,spacing:3,children:t.map((e=>(0,_.jsx)(m.Ay,{item:!0,sx:12,sm:6,md:4,children:(0,_.jsx)(p.A,{room:e})},e._id)))})]})}}}]);
//# sourceMappingURL=349.94926d0a.chunk.js.map